function SudokuGame(e){this.SETTINGS={easy:50,medium:40,hard:30},this.difficulty=e||"easy",this.solution=this.generatePuzzle(),this.puzzle=this.initializePuzzle(this.difficulty),this.playersGrid=this.copyPuzzle(this.puzzle)}SudokuGame.prototype.generatePuzzle=function(){var e=[[7,2,3,4,5,1,9,6,8],[8,5,1,9,6,3,4,2,7],[4,6,9,8,2,7,1,5,3],[3,1,6,2,4,8,5,7,9],[2,8,7,1,9,5,6,3,4],[9,4,5,3,7,6,2,8,1],[1,7,2,6,8,9,3,4,5],[6,9,8,5,3,4,7,1,2],[5,3,4,7,1,2,8,9,6]];return e},SudokuGame.prototype.initializePuzzle=function(e){var t,o,r=this.SETTINGS[e],n=this.solution.length,u=this.solution[0].length,i=[];for(t=0;n>t;t++)for(i.push([]),o=0;u>o;o++)i[t].push(100*Math.random()<r/81*100?this.solution[t][o]:0);return i},SudokuGame.prototype.copyPuzzle=function(e){var t,o,r=e.length,n=e[0].length,u=[];for(t=0;r>t;t++)for(u.push([]),o=0;n>o;o++)u[t].push(e[t][o]);return u},SudokuGame.prototype.print=function(e){var t,o,r=e.length,n=e[0].length,u="";for(t=0;r>t;t++){for(t%3===0&&(u+="- - - - - - - - - - - - \n"),o=0;n>o;o++)o%3===0&&(u+="| "),u+=e[t][o]+" ";u+="\n"}console.log(u)},SudokuGame.prototype.isSolved=function(){var e,t,o=this.playersGrid.length,r=this.playersGrid[0].length;for(e=0;o>e;e++)for(t=0;r>t;t++)if(parseInt(this.playersGrid[e][t],10)!==parseInt(this.solution[e][t],10))return!1;return!0},SudokuGame.prototype.isComplete=function(){return 0===this.getEmptyCells(this.playersGrid).length},SudokuGame.prototype.playerInput=function(e,t,o){e=parseInt(e,10),t=parseInt(t,10);var r=parseInt(o,10);if(""!==o&&(isNaN(r)||0>=r||r>=10))throw{name:"invalidGuess",message:"a number between 1 and 9 is required"};this.playersGrid[e][t]=""===o?0:o},SudokuGame.prototype.getPlayersGuesses=function(){var e,t,o=[];for(e=0;e<this.puzzle.length;e++)for(o.push([]),t=0;t<this.puzzle[e].length;t++)o[e].push(this.playersGrid[e][t]-this.puzzle[e][t]);return o},SudokuGame.prototype.getEmptyCells=function(e){var t,o,r=e.length,n=e[0].length,u=[];for(t=0;r>t;t++)for(o=0;n>o;o++)0===e[t][o]&&u.push([t,o]);return u},SudokuGame.prototype.getPossibleValuesForCell=function(e,t,o,r){var n,u,i,s={row:t,column:o,values:{1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0},clash:{row:!1,column:!1,subgrid:!1}},l=(e[t][o],this.whichSubGrid(t,o));for(r=parseInt(r,10),n=0;n<e[t].length;n++)i=e[t][n],s.values[i]=!1,s.clash.row||(s.clash.row=i===r?!0:!1);for(n=0;n<e.length;n++)i=e[n][o],s.values[i]=!1,s.clash.column||(s.clash.column=i===r?!0:!1);for(n=l.startRowIndex;n<=l.endRowIndex;n++)for(u=l.startColumnIndex;u<=l.endColumnIndex;u++)i=e[n][u],s.values[i]=!1,s.clash.subgrid||(s.clash.subgrid=i===r?!0:!1);return delete s.values[0],s},SudokuGame.prototype.whichSubGrid=function(e,t){var o={},r=this.resolveSubGridCoordinate(e),n=this.resolveSubGridCoordinate(t);return o.coordinates=[r,n],o.endColumnIndex=3*n-1,o.startColumnIndex=o.endColumnIndex-2,o.endRowIndex=3*r-1,o.startRowIndex=o.endRowIndex-2,o},SudokuGame.prototype.resolveSubGridCoordinate=function(e){return 3>e?1:6>e?2:9>e?3:void 0},SudokuGame.prototype.giveHint=function(){var e,t,o=this.getEmptyCells(this.playersGrid),r=Math.floor(Math.random()*o.length);return o.length>r?(e=o[r][0],t=o[r][1],{row:e,column:t,hint:this.solution[e][t]}):{hint:null}};
